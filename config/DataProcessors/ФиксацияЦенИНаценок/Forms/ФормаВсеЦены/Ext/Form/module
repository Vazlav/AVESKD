
Процедура КнопкаВыполнитьНажатие(Кнопка)
	// Вставить содержимое обработчика.
КонецПроцедуры

Процедура ПриОткрытии()
	
	ТХТ = "ВЫБРАТЬ
	      |	КонкурентыЕГК.Наименование КАК Конкурент,
	      |	КонкурентыЕГК.Вес,
	      |	ЦеныКонкурентов.Цена КАК Цена,
		  | КонкурентыЕГК.Код
	      |ИЗ
	      |	РегистрСведений.ЦеныКонкурентов КАК ЦеныКонкурентов
	      |		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.КонкурентыЕГК КАК КонкурентыЕГК
	      |		ПО ЦеныКонкурентов.КодКонкурента = КонкурентыЕГК.Код
	      |			И (КонкурентыЕГК.Вес > 0)
	      |			И (КонкурентыЕГК.ЗагружатьДанные = ИСТИНА)
	      |		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.АССОРТИМЕНТНЫЙ_ПЛАН КАК АССОРТИМЕНТНЫЙ_ПЛАН
	      |		ПО ЦеныКонкурентов.КодТовараСправочной = АССОРТИМЕНТНЫЙ_ПЛАН.Код
	      |ГДЕ
	      |	ЦеныКонкурентов.КодТовараСправочной = &КодТовара
	      |	И КонкурентыЕГК.Вес > 0
	      |	И КонкурентыЕГК.ЗагружатьДанные = ИСТИНА
	      |
	      |УПОРЯДОЧИТЬ ПО
	      |	Цена";
		  
	Запрос = Новый Запрос;
	Запрос.Текст = ТХТ;
	Запрос.УстановитьПараметр("КодТовара",Код);
	ВремТЗ = Запрос.Выполнить().Выгрузить();
		
	
КонецПроцедуры

Процедура ВремТЗВесПриИзменении(Элемент)
	
	
	Конкурент = Справочники.КонкурентыЕГК.НайтиПоКоду(ЭлементыФормы.ВремТЗ.ТекущаяСтрока.Код);
	Если НЕ Конкурент.Пустая() Тогда
		КонкурентОбъект = Конкурент.ПолучитьОбъект();
		КонкурентОбъект.Вес = Элемент.Значение;
		КонкурентОбъект.Записать();
	КонецЕсли;
	
КонецПроцедуры
