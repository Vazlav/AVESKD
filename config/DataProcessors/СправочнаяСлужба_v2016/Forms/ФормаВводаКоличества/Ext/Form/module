перем ТекЕИТ;


Процедура ОсновныеДействияФормыВвестиКоличество(Кнопка)
	
	Если Количество=0 Тогда
		ПРедупреждение("Не введено количество!");
		Возврат;
	КонецЕсли;	
	
	ЭтаФорма.Закрыть();
КонецПроцедуры

Процедура ПриОткрытии()
	 //ЕИТ единица на сайте, либо еит по умолчанию либо из справочника ИА_РазбивочныйТовар
	ЭлементыФормы.НадписьКоэфф.Заголовок=ЕИТ.К;
	
	ТекЕИТ=ЕИТ;
	
	Если МаксКолво=0 Тогда
		ЭлементыФормы.НадписьМаксКолво.Заголовок="под заказ";
	Иначе	
		ЭлементыФормы.НадписьМаксКолво.Заголовок=МаксКолво/ЕИТ.К;
		ЭлементыФормы.Количество.МаксимальноеЗначение=МаксКолво/ЕИТ.К;
	КонецЕсли;
	
КонецПроцедуры


Процедура КоличествоПриИзменении(Элемент)

КонецПроцедуры


Процедура ПопытатьсяНайтиПоследнююЦену(Товар)
КонецПроцедуры


Процедура ПолеВвода1ПриИзменении(Элемент)
	// МинимальноДопустимаяЦена за единицу на сайте

	//Если МинимальноДопустимаяЦена<>0 ТОгда
	//	Если Цена<МинимальноДопустимаяЦена Тогда
	//		Цена=МинимальноДопустимаяЦена;
	//	КонецЕсли;
	//Иначе
	//	ПопытатьсяНайтиПоследнююЦену(Товар);
	//КонецЕсли;
	Если Цена = 0 Тогда
		Цена = МинимальноДопустимаяЦена;
	КонецЕсли;
	
КонецПроцедуры

Процедура ЕИТПриИзменении(Элемент)
	ЭлементыФормы.НадписьКоэфф.Заголовок=ЕИТ.К;
	
	Если ЕИТ<>ТекЕИТ Тогда
		ЕдиничнаяМДЦ=МинимальноДопустимаяЦена/ТекЕИТ.К;
		МинимальноДопустимаяЦена=ЕдиничнаяМДЦ*ЕИТ.К;
		
		
		ЕдиничнаяЦена=Цена/ТекЕИТ.К;
		Цена=ЕдиничнаяЦена*ЕИТ.К;
		
		ЭлементыФормы.НадписьМаксКолво.Заголовок=МаксКолво/ЕИТ.К;

		ТекЕИТ=ЕИТ;
	КонецЕсли;	
		
	
КонецПроцедуры
