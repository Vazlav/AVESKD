Функция ДобавитьТоварВМатрицуАптеки () 
	
	//Блокировка = Новый БлокировкаДанных;
	//БлокировкаМатрицы = Блокировка.Добавить("РегистрСведений.Матрица");
	//БлокировкаМатрицы.УстановитьЗначение("Аптека",ВыбАптека);
	//БлокировкаМатрицы.УстановитьЗначение("Товар",Товар);
	//Блокировка.Заблокировать();	
	
	
	
	НаборЗаписей = РегистрыСведений.Матрица.СоздатьНаборЗаписей(); 
	
	НаборЗаписей.Отбор.Товар.Установить(Товар);
	НаборЗаписей.Отбор.Аптека.Установить(ВыбАптека); 
	
	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Аптека = ВыбАптека;
	НоваяЗапись.Товар = Товар;
	//НоваяЗапись.НЗ = НЗ;
	НоваяЗапись.ГруппаАПИтог = ГруппаАП;
	НоваяЗапись.КтоВнесВМатрицу = ПараметрыСеанса.ТекущийСотр;
	НоваяЗапись.ДатаВнесенияВМатрицу = ТекущаяДата();
	
	НаборЗаписей.Записать();	
	
	
	НаборЗаписей = РегистрыСведений.МатрицаНЗ.СоздатьНаборЗаписей(); 
	
	НаборЗаписей.Отбор.Товар.Установить(Товар);
	НаборЗаписей.Отбор.Аптека.Установить(ВыбАптека); 
	НаборЗаписей.Отбор.ВидНЗ.Установить(ВидНЗ);
	
	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Аптека = ВыбАптека;
	НоваяЗапись.Товар = Товар;
	НоваяЗапись.ВидНЗ = ВидНЗ;
	НоваяЗапись.НЗ = НЗ;
	НоваяЗапись.КтоВнесВМатрицу = ПараметрыСеанса.ТекущийСотр;
	НоваяЗапись.ДатаВнесенияВМатрицу = ТекущаяДата();
	
	НаборЗаписей.Записать();	
	
КонецФункции


Процедура КнопкаВыполнитьНажатие(Кнопка)
	
	
	
	Результат = ДобавитьТоварВМатрицуАптеки();
	Если Результат = Ложь Тогда
		Предупреждение("Товар НЕ добавился в матрицу аптеки.");
	КонецЕсли;
	СтруктураДобавления = Новый Структура;
	СтруктураДобавления.Вставить("КодТовара",Товар.Код);
	СтруктураДобавления.Вставить("Товар",Товар.Наименование);
	СтруктураДобавления.Вставить("ВидНЗ",ВидНЗ);
	СтруктураДобавления.Вставить("НЗ",НЗ);
	СтруктураДобавления.Вставить("Заказать",Заказать);
	СтруктураДобавления.Вставить("ГруппаАП",ГруппаАП);
	
		
	
	ОповеститьОВыборе(СтруктураДобавления);
	
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	ВидНЗ = Перечисления.ВидыНЗ.НЗ_1;
	
КонецПроцедуры
