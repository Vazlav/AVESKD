
Процедура ОсновныеДействияФормыЗаписать(Кнопка)
	// Вставить содержимое обработчика.
	
	Док=Документы.ИсточникиИнформацииОбАптекеСС.СоздатьДокумент();
	Док.Дата=ТекущаяДата();
	
	Док.Аптека=Аптека;
	
	Для Каждого Стр Из Стандартные Цикл
		Если Стр.Пометка=Истина Тогда
			ДОк.ИсточникиИнформации.Добавить().ИсточникИнформации=Стр.Значение;
		КонецЕсли;	
	КонецЦикла;	
	
	
	Для Каждого Стр Из Дополнительные Цикл
		Если Стр.Пометка=Истина Тогда
			ДОк.ИсточникиИнформации.Добавить().ИсточникИнформации=Стр.Значение;
		КонецЕсли;	
	КонецЦикла;	
	
	
	Если Док.ИсточникиИнформации.Количество()=0 Тогда
		Предупреждение("Не указано ни одного источника!");
		Возврат;
	КонецЕсли;
	
	Док.Записать();
	
	ЭтаФорма.Закрыть();
	
	
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОтмена(Кнопка)
	// Вставить содержимое обработчика.
	ЭтаФорма.Закрыть();
КонецПроцедуры

Процедура ДобавитьНовыйДополнительныйИсточникНажатие(Элемент)
	
	Если ПустаяСтрока(НовыйДополнительныйИсточник)=Истина Тогда
		Предупреждение("Не указан новый источник информации об аптеке!",15);
		Возврат;
	КонецЕсли;	
		
	
	НовыйИсточник=Справочники.ИсточникиИнформации.СоздатьЭлемент();
	НовыйИсточник.Родитель=Справочники.ИсточникиИнформации.ДругиеИсточники;
	НовыйИсточник.Наименование=НовыйДополнительныйИсточник;
	НовыйИсточник.Записать();
	
	НовыйИст=Дополнительные.Добавить(НовыйИсточник.Ссылка);
	НовыйИст.Пометка=Истина;
	
	
КонецПроцедуры


Запрос=Новый Запрос("ВЫБРАТЬ
                    |	ИсточникиИнформации.Ссылка как Источник
                    |ИЗ
                    |	Справочник.ИсточникиИнформации КАК ИсточникиИнформации
                    |ГДЕ
                    |	ИсточникиИнформации.Родитель = &ГруппаИсточников
                    |
                    |УПОРЯДОЧИТЬ ПО
                    |	ИсточникиИнформации.Наименование
                    |АВТОУПОРЯДОЧИВАНИЕ");
					
Запрос.УстановитьПараметр("ГруппаИсточников",Справочники.ИсточникиИнформации.СтандартныеИсточники);
Стандартные.ЗагрузитьЗначения(Запрос.Выполнить().Выгрузить().ВыгрузитьКолонку("Источник"));

Запрос.УстановитьПараметр("ГруппаИсточников",Справочники.ИсточникиИнформации.ДругиеИсточники);
Дополнительные.ЗагрузитьЗначения(Запрос.Выполнить().Выгрузить().ВыгрузитьКолонку("Источник"));


		   
		   