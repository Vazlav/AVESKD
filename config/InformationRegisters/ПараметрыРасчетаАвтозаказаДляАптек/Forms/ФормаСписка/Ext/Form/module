
Процедура ДействияФормыкнПоказатьСреднююВыручку(Кнопка)
	
	Постр = Новый ПостроительОтчета;
	Постр.Текст = "ВЫБРАТЬ
	              |	АЗ.Аптека.Наименование КАК _Аптека,
	              |	АЗ.ШаблонМатрицы.Наименование КАК Шаблон,
	              |	АЗ.ДатаИзменения,
	              |	Выборка.ДнейВыручки,
	              |	Выборка.СредняяВыручка,
	              |	Выборка.МинимальнаяВыручка,
	              |	Выборка.МаксимальнаяВыручка
	              |ИЗ
	              |	РегистрСведений.ПараметрыРасчетаАвтозаказаДляАптек КАК АЗ
	              |		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
	              |			ОТЧ_ОтчетПоВыручкеОбороты.СкладКод КАК СкладКод,
	              |			КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ОТЧ_ОтчетПоВыручкеОбороты.Период) КАК ДнейВыручки,
	              |			СРЕДНЕЕ(ОТЧ_ОтчетПоВыручкеОбороты.СуммаВыручкиОборот) КАК СредняяВыручка,
	              |			МИНИМУМ(ОТЧ_ОтчетПоВыручкеОбороты.СуммаВыручкиОборот) КАК МинимальнаяВыручка,
	              |			МАКСИМУМ(ОТЧ_ОтчетПоВыручкеОбороты.СуммаВыручкиОборот) КАК МаксимальнаяВыручка
	              |		ИЗ
	              |			РегистрНакопления.ОТЧ_ОтчетПоВыручке.Обороты(&НачПериода, &Конпериода, День, ) КАК ОТЧ_ОтчетПоВыручкеОбороты
	              |		
	              |		СГРУППИРОВАТЬ ПО
	              |			ОТЧ_ОтчетПоВыручкеОбороты.СкладКод) КАК Выборка
	              |		ПО АЗ.Аптека.Код = Выборка.СкладКод
	              |
	              |УПОРЯДОЧИТЬ ПО
	              |	_Аптека";
		Постр.Параметры.Вставить("НачПериода",НачалоДня(ТекущаяДата()) - 24*60*60*7);
		Постр.Параметры.Вставить("КонПериода",КонецДня(ТекущаяДата()));
		Постр.МакетОформления=ПолучитьМакетОформления(СтандартноеОформление.Трава);
		Постр.Выполнить();
		Постр.Вывести();


	
КонецПроцедуры
