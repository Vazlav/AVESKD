Процедура ЗаполнитьСписокРеквизитовВидаДокумента()
	
	СВ=ЭлементыФормы.ИмяРеквизитаДокумента.СписокВыбора;
	
	СВ.Очистить();
	
	СВ.Добавить("Номер","Номер");
    СВ.Добавить("Дата","Дата");

	
	Для Каждого Рекв Из Метаданные.Документы[МД].Реквизиты Цикл
		СВ.Добавить(Рекв.Имя,Рекв.Синоним);
	КонецЦикла;	
	
	Для Каждого МДТЧ из Метаданные.Документы[МД].ТабличныеЧасти Цикл
		Для Каждого Рекв Из МДТЧ.Реквизиты Цикл
					СВ.Добавить(Рекв.Имя,""+МДТЧ.Имя+"."+Рекв.Синоним);
		КонецЦикла;			
	КонецЦикла;	
	
КонецПроцедуры	




Процедура ПриОткрытии()
	Для Каждого Док Из Метаданные.Документы Цикл
		ЭлементыФормы.МД.СписокВыбора.Добавить(Док.Имя,Док.Синоним);
	КонецЦикла;
	
	МДПриИзменении("");	
	
	
	
	
	
КонецПроцедуры

Процедура МДПриИзменении(Элемент)
	Если Найти(СокрЛП(МД)," ")=0 Тогда
		Если СокрЛП(МД) <> "" Тогда
			ЗаполнитьСписокРеквизитовВидаДокумента();
		КонецЕсли;
	Иначе
		// это виртуальный документ типа товарного отчета, его в базе не существует
	КонецЕсли;
КонецПроцедуры
