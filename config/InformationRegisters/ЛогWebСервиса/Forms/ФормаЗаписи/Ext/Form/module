
Процедура ДействияФормыОткрытьВКонсолиЗапросов(Кнопка)
	
	Попытка
		СтруктураЛога=ЗначениеИзСтрокиВнутр(ОписаниеОшибки);
	Исключение
		Предупреждение("Это не запрос");
		Возврат;
	КонецПопытки;	
	
	Если ТипЗнч(СтруктураЛога)<>Тип("Структура") Тогда
		Предупреждение("Это не запрос");
		Возврат;
	КонецЕсли;
	
	
	
		
	
	
	
    Консоль=Отчеты.GtGsКонсольЗапросов.Создать();
	Консоль.Построитель.Текст=СтруктураЛога.Запрос;
	Консоль.Построитель.УстановитьНастройки(СтруктураЛога.Настройки);
	
	Консоль.Построитель.Параметры.Очистить();
	
	Для Каждого Парам Из СтруктураЛога.Параметры Цикл
		Консоль.Построитель.Параметры.Вставить(Парам.Ключ,Парам.Значение);
	КонецЦикла;	

	ФК=Консоль.ПолучитьФорму("Форма");
	ФК.Открыть();
	
	Для Каждого Парам из Консоль.Построитель.Параметры Цикл
		Стр=ФК.ЭлементыФормы.ТППараметров.Значение.Добавить();
		Стр.Имя=Парам.Ключ;
		Стр.Значение=Парам.Значение;
	КонецЦикла;	
	
	
	
	ФК.ЭлементыФормы.ТекстЗапроса.УстановитьТекст(СтруктураЛога.Запрос);
		
	

КонецПроцедуры
