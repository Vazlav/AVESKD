
Процедура ПриОткрытии()
	
	
	Если СпособВвода = "ЗапрашиватьКоличествоИЦену" Тогда
		ЭлементыФормы.НадписьСумма.Доступность = Ложь;
		ЭлементыФормы.СуммаБезНДС.Доступность = Ложь;
	ИначеЕсли СпособВвода = "ЗапрашиватьКоличествоИСумму" Тогда
		ЭлементыФормы.НадписьЦена.Доступность = Ложь;
		ЭлементыФормы.ЦенаБезНДС.Доступность = Ложь;
	ИначеЕсли  СпособВвода = "ЗапрашиватьКоличество" Тогда
		ЭлементыФормы.НадписьСумма.Доступность = Ложь;
		ЭлементыФормы.СуммаБезНДС.Доступность = Ложь;
		ЭлементыФормы.НадписьЦена.Доступность = Ложь;
		ЭлементыФормы.ЦенаБезНДС.Доступность = Ложь;
	КонецЕсли;
	
	ЕИТ = Товар.ЕдиницаПоУмолчанию;
	
	
КонецПроцедуры

Процедура кнДобавитьНажатие(Элемент)
	
	// Заполним структуру возвращаемых параметров
	СтруктураВозвращаемыхЗначений = Новый Структура();
	СтруктураВозвращаемыхЗначений.Вставить("Количество", Количество);
	СтруктураВозвращаемыхЗначений.Вставить("ЦенаБезНДС", ЦенаБезНДС);
	СтруктураВозвращаемыхЗначений.Вставить("СуммаБезНДС", СуммаБезНДС);
	СтруктураВозвращаемыхЗначений.Вставить("ЕИТ", ЕИТ);
	СтруктураВозвращаемыхЗначений.Вставить("Товар", Товар);
	СтруктураВозвращаемыхЗначений.Вставить("СтавкаНДС", ПереопределениеЗначенияСтавки20_18(Товар.СтавкаНДС,ТекущаяДата())); 



	
	// Все сделали, можно закрывать форму
	Закрыть(СтруктураВозвращаемыхЗначений);
	
КонецПроцедуры

Процедура ЦенаПриИзменении(Элемент)
	
	СуммаБезНДС = ЦенаБезНДС*Количество;
	
КонецПроцедуры

Процедура СуммаПриИзменении(Элемент)
	
	Если Количество > 0 Тогда
		ЦенаБезНДС = СуммаБезНДС/Количество;
	КонецЕсли;
	
КонецПроцедуры
