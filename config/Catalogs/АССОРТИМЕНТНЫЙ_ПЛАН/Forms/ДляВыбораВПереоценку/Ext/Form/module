
Процедура ТудаВсеНажатие(Элемент)
	// добавляем в список выбранных позиций все ЕИТы выбранного товара
	ТХТ="ВЫБРАТЬ
	    |	ЕИТ.Ссылка как ЕИТСсылка,
	    |	ЕИТ.К как К,
	    |	ЕИТ.Код как КодЕИТ,
	    |	ЕИТ.Владелец как ТОВАР
	    |ИЗ
	    |	Справочник.ЕИТ КАК ЕИТ
	    |ГДЕ
	    |	ЕИТ.Владелец = &Ссылка";
	
	  Запрос=Новый Запрос;
	  Запрос.Текст=ТХТ;
	  Запрос.УстановитьПараметр("Ссылка", ЭлементыФормы .ТПАП.ТекущаяСтрока );
	  
	  ТЗ=ЗАпрос.Выполнить().Выгрузить();
	  
	  Для каждого Стр из ТЗ Цикл
		  Если ТПРез.Найти(Стр.ЕИТСсылка,"ЕИТ")= Неопределено ТОгда   // добавим только если нет такой еиты
			  
			  Рез=ТПРез.Добавить();
			  Рез.Товар=Стр.ТОвар;
			  Рез.ЕИТ= Стр.ЕИТСсылка;
			  Рез.К=Стр.К;
			  Рез.Код=Стр.КодЕит;
		  КонецЕсли;
	  КонецЦикла;	
	  
	
КонецПроцедуры

Процедура ОсновныеДействияФормыВыбрать(Кнопка)
	 // Результат выбора в форму вызвавшую подбор
	ЭтаФорма.ОповеститьОВыборе(ТПРЕЗ);	
	
КонецПроцедуры

Процедура ОтТудаОдноНажатие(Элемент)
	// Удаляем одну (выбранную) строку из списка выбранных позиций
	Если ЭлементыФормы.ТПРЕЗ.ТекущаяСтрока<> Неопределено  Тогда   
		ТПРез.Удалить(ЭлементыФормы.ТПРЕЗ.ТекущаяСтрока);
	КонецЕсли; 
КонецПроцедуры

Процедура ТудаОдноНажатие(Элемент)
	// Добавляем одну еитину в список выбранных позиций
	
	ЕИТина=ЭлементыФормы.ТПЕИТ.ТекущаяСтрока;
	
	Если ТПРез.Найти(ЕИТина,"ЕИТ")= Неопределено ТОгда   // добавим только если нет такой еиты
		Рез=ТПРез.Добавить();
		Рез.Товар=ЕИТина.Владелец.Ссылка;
		Рез.ЕИТ= ЕИТина;
		Рез.К=ЕИТина.К;
		Рез.Код=ЕИТина.Код;
	КонецЕсли; 
	
КонецПроцедуры


Процедура ОтТудаВсеНажатие(Элемент)
	ТПРез.Очистить();
КонецПроцедуры









