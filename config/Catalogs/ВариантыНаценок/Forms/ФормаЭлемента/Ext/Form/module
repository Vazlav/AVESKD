
Процедура ПередЗаписью(Отказ)
	
	НастройкиПостроителя = ЗначениеВСтрокуВнутр(Построитель.ПолучитьНастройки());

КонецПроцедуры

Процедура ПриОткрытии()
	
	Построитель.Текст = 
	"ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	АССОРТИМЕНТНЫЙ_ПЛАН.ЖНВЛС КАК ЖНВЛС,
	|	АССОРТИМЕНТНЫЙ_ПЛАН.ТипДляЦО КАК ТипДляЦО,
	|	АССОРТИМЕНТНЫЙ_ПЛАН.Бренд КАК Бренд,
	|	МестаХранения.СубъектРФ КАК СубъектРФ
	|ИЗ
	|	Справочник.АССОРТИМЕНТНЫЙ_ПЛАН КАК АССОРТИМЕНТНЫЙ_ПЛАН,
	|	Справочник.МестаХранения КАК МестаХранения
	|ГДЕ
	|	НЕ АССОРТИМЕНТНЫЙ_ПЛАН.ТипДляЦО ЕСТЬ NULL 
	|	И НЕ АССОРТИМЕНТНЫЙ_ПЛАН.ЖНВЛС ЕСТЬ NULL 
	|	И НЕ АССОРТИМЕНТНЫЙ_ПЛАН.Бренд ЕСТЬ NULL 
	|	И НЕ МестаХранения.СубъектРФ ЕСТЬ NULL";
	
	Построитель.ЗаполнитьНастройки();
	
	Если СокрЛП(НастройкиПостроителя) <> "" Тогда
		Построитель.УстановитьНастройки(ЗначениеИзСтрокиВнутр(НастройкиПостроителя), Истина, Ложь, Ложь, Ложь, Ложь);		
	Иначе      		
		Построитель.Отбор.Добавить("ТипДляЦО",	, "Товар.ТипДляЦО");
		Построитель.Отбор.Добавить("ЖНВЛС",		, "Товар.ЖНВЛС");
		Построитель.Отбор.Добавить("Бренд", 	, "Товар.Бренд");
		Построитель.Отбор.Добавить("СубъектРФ",	, "Аптека.СубъектРФ");
	КонецЕсли;
	
КонецПроцедуры
