
Процедура ПриОткрытии()
	
	
	СписокДней = Новый СписокЗначений;
	СписокДней.Добавить(1);
	СписокДней.Добавить(2);
	СписокДней.Добавить(3);
	СписокДней.Добавить(4);
	СписокДней.Добавить(5);
	СписокДней.Добавить(6);
	СписокДней.Добавить(7);
	
	СписокДнейДляДобавления = Новый СписокЗначений;
	ПустыеДни = "";
	Для каждого стр из СписокДней Цикл
		Если Состав.Найти(стр.Значение,"ДеньНедели") = Неопределено Тогда
			ПустыеДни = ПустыеДни + ?(ПустыеДни = ""," ",", ") + стр.Значение ;
			СписокДнейДляДобавления.Добавить(стр.Значение);
		КонецЕсли;
	КонецЦикла;
	
	Если НЕ ПустыеДни = "" Тогда
		//Режим = РежимДиалогаВопрос.ДаНет;
		//Ответ = Вопрос("Режим не имеет расписания по дням " + ПустыеДни + ". Произвести добавление этих дней?",Режим,0);
		//Если Ответ = КодВозвратаДиалога.Нет Тогда
		//	Возврат;
		//КонецЕсли;
		Предупреждение("Режим не имеет расписания по дням " + ПустыеДни + ". После предупреждения введите часы начала и окончания работы");
		
		ВремяНачала = Дата(1,1,1);
		ВвестиДату(ВремяНачала,"Введите время начала работы", ЧастиДаты.Время);
		
		ВремяОкончания = Дата(1,1,1);
		ВвестиДату(ВремяОкончания,"Введите время окончания работы", ЧастиДаты.Время);
		
		Для каждого стр из СписокДнейДляДобавления Цикл
			НоваяСтрока = Состав.Добавить();	
			НоваяСтрока.ДеньНедели = стр.Значение;
			НоваяСтрока.ВремяНачала = ВремяНачала;
			НоваяСтрока.ВремяОкончания = ВремяОкончания;
			ПересчетПланаВЧасах(НоваяСтрока);
		КонецЦикла;
		Состав.Сортировать("ДеньНедели"); 
	КонецЕсли;
	
	
	
	
КонецПроцедуры

Процедура ПересчетПланаВЧасах(ТСД)
	
	Если ТСД.ВремяОкончания = Дата(1,1,1) или ТСД.Выходной Тогда
		ТСД.ПланВЧасах = 0;
	Иначе
		ТСД.ПланВЧасах = (ТСД.ВремяОкончания - ТСД.ВремяНачала)/3600;
	КонецЕсли;
	
КонецПроцедуры

Процедура СоставВремяОкончанияПриИзменении(Элемент)
	
 	ПересчетПланаВЧасах(ЭлементыФормы.Состав.ТекущаяСтрока);
	
КонецПроцедуры

Процедура СоставВремяНачалаПриИзменении(Элемент)
	
	ПересчетПланаВЧасах(ЭлементыФормы.Состав.ТекущаяСтрока);
КонецПроцедуры

Процедура СоставПриИзмененииФлажка(Элемент, Колонка)
	ПересчетПланаВЧасах(ЭлементыФормы.Состав.ТекущаяСтрока);
КонецПроцедуры
