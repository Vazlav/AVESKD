Перем СоответствиеШаблоныКаталога;

Процедура УзелОбменаПриИзменении(Элемент)
	
	МЗ = РегистрыСведений.НастройкиОбмена.СоздатьМенеджерЗаписи();
	МЗ.НастройкаОбмена = НастройкаОбмена ;
	МЗ.УзелОбмена = УзелОбмена;
	МЗ.Прочитать();
	МЗРесурсы = Метаданные.РегистрыСведений.НастройкиОбмена.Ресурсы;
	//Если МЗ.Выбран() Тогда
		Для каждого стр из МЗРесурсы Цикл
			Элемент = ЭлементыФормы.Найти(стр.Имя);
			Если Элемент = Неопределено Тогда
				Продолжить;
			Иначе
				Элемент.Значение = МЗ[стр.Имя];
			КонецЕсли;
		КонецЦикла;
	//КонецЕсли;
	Если ПустаяСтрока(FILEМаска) Тогда
		FILEМаска = "*.dbf";	
	КонецЕсли;
	
КонецПроцедуры

Процедура кнСохранитьНажатие(Элемент)
	
	МЗ = РегистрыСведений.НастройкиОбмена.СоздатьМенеджерЗаписи();
	МЗ.НастройкаОбмена = НастройкаОбмена ;
	МЗ.УзелОбмена = УзелОбмена;
	МЗРесурсы = Метаданные.РегистрыСведений.НастройкиОбмена.Ресурсы;
	
	Для каждого стр из МЗРесурсы Цикл
		Элемент = ЭлементыФормы.Найти(стр.Имя);
		Если Элемент = Неопределено Тогда
			Продолжить;
		Иначе
			МЗ[стр.Имя] = Элемент.Значение;
		КонецЕсли;
	КонецЦикла;
	
	 МЗ.Записать();
	
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	УзелОбменаПриИзменении("");
	
КонецПроцедуры

Процедура FILEКаталогОбменаНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	СтандартнаяОбработка=Ложь;
	Файл=Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.ВыборКаталога);
	Файл.МножественныйВыбор=Ложь;
	Файл.Заголовок="Выберите каталог ...";
	Если Файл.Выбрать() Тогда
		FILEКаталогОбмена=СокрЛП(Файл.Каталог);
	КонецЕсли;
	
	
КонецПроцедуры

Процедура ГенерацияКаталогаНажатие(Элемент)
	
	FILEКаталогОбмена = СоответствиеШаблоныКаталога[УзелОбмена];
	
КонецПроцедуры

СоответствиеШаблоныКаталога = Новый Соответствие;
СоответствиеШаблоныКаталога.Вставить("Прайс","\\id-vm-1\ftp_data\supplregions\<папка поставщика>\price\");
СоответствиеШаблоныКаталога.Вставить("Заказ","\\id-vm-1\ftp_data\supplregions\<папка поставщика>\orders\");
СоответствиеШаблоныКаталога.Вставить("Отказ","\\id-vm-1\ftp_data\supplregions\<папка поставщика>\otkaz\");
СоответствиеШаблоныКаталога.Вставить("Накладная","\\id-vm-1\ftp_data\supplregions\<папка поставщика>\enakl\");
СоответствиеШаблоныКаталога.Вставить("Инвойс","\\id-vm-1\ftp_data\supplregions\<папка поставщика>\enakl_gdp\");
СоответствиеШаблоныКаталога.Вставить("ЗаказОпт","\\id-vm-1\ftp_data\supplregions\<папка поставщика>\orders\");
