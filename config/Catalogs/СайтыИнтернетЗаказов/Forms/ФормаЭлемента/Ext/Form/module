
Процедура ПередЗаписью(Отказ)
	Запрос = Новый Запрос;
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	СайтыИнтернетЗаказов.Ссылка КАК Ссылка
	|ИЗ
	|	Справочник.СайтыИнтернетЗаказов КАК СайтыИнтернетЗаказов
	|ГДЕ
	|	СайтыИнтернетЗаказов.Ссылка <> &Ссылка
	|	И СайтыИнтернетЗаказов.ПрефиксЗаказа = &ПрефиксЗаказа
	|	И СайтыИнтернетЗаказов.ПрефиксЗаказа <> """"";
	
	Запрос.Текст = ТекстЗапроса;
	Запрос.УстановитьПараметр("Ссылка", Ссылка);
	Запрос.УстановитьПараметр("ПрефиксЗаказа", ПрефиксЗаказа);
	
	Рез = Запрос.Выполнить();
	Если Не Рез.Пустой() Тогда
		
		Выборка = Рез.Выбрать();
		Выборка.Следующий();
		
		Предупреждение("Обнаружен элемент справочника с таким же кодом: "+СокрЛП(Выборка.Ссылка)+". Элемент не записан!");
		Отказ = Истина;	
	
	КонецЕсли; 
	
КонецПроцедуры
