
Процедура СправочникСписокПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
	Если ДанныеСтроки.Активность = Ложь Тогда
		ОформлениеСтроки.ЦветТекста=Новый Цвет(160,160,160);	
	КонецЕсли;		
	
КонецПроцедуры

Процедура КонтрактыИАптекиПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
	Если ДанныеСтроки.Активность = Ложь Тогда
		ОформлениеСтроки.ЦветТекста=Новый Цвет(160,160,160);	
	КонецЕсли;			
	
КонецПроцедуры

Процедура ЗначениеПоискаПриИзменении(Элемент)
	
	Если ЗначениеПоиска.Пустая() Тогда
		Возврат;
	КонецЕсли;
	
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	               |	КонтрактыИАптеки.Ссылка,
	               |	КонтрактыИАптеки.Владелец как Контракт
	               |ИЗ
	               |	Справочник.КонтрактыИАптеки КАК КонтрактыИАптеки
	               |ГДЕ
	               |	КонтрактыИАптеки.Аптека = &Аптека";
				   
	Запрос.УстановитьПараметр("Аптека",ЗначениеПоиска);	
	Рез = Запрос.Выполнить();
	Если Рез.Пустой() Тогда
		Предупреждение("Аптека не найдена!");
		Запрос = Неопределено;
		Возврат;
	КонецЕсли;
	
	
	Выборка = Рез.Выбрать();
	Выборка.Следующий();
	ЭлементыФормы.СправочникСписок.ТекущаяСтрока = Выборка.Контракт;
	ЭлементыФормы.КонтрактыИАптеки.ТекущаяСтрока = Выборка.Ссылка;
	Запрос = Неопределено;
	
КонецПроцедуры
