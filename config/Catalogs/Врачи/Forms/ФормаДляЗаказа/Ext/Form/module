
Процедура ОсновныеДействияФормыВыбрать(Кнопка)
	ОповеститьОВыборе(Врач);

КонецПроцедуры

Процедура ШтрихкодПриИзменении(Элемент)
	Запрос=Новый Запрос("ВЫБРАТЬ
	                    |	ВрачиРецептурныеКнижки.Ссылка,
	                    |	ВрачиРецептурныеКнижки.Ссылка.Код как Код
	                    |ИЗ
	                    |	Справочник.Врачи.РецептурныеКнижки КАК ВрачиРецептурныеКнижки
	                    |ГДЕ
	                    |	ВрачиРецептурныеКнижки.Штрихкод = &Штрихкод");	
	Запрос.УстановитьПараметр("ШтрихКод",Штрихкод);
	
	Рез=Запрос.Выполнить().Выгрузить();
	Если Рез.Количество()=0 Тогда
		Предупреждение("Не найден!",5);
		Возврат;
	КонецЕСли;
	
	Врач=Рез.Получить(0).Ссылка;
	КодВрача=Рез.Получить(0).Код;

	
КонецПроцедуры

Процедура СписокВрачейВыбор(Элемент, ВыбраннаяСтрока, Колонка, СтандартнаяОбработка)
	СтандартнаяОбработка=Ложь;
	Врач=ВыбраннаяСтрока;
	КодВрача=Врач.Код;
КонецПроцедуры

Процедура ЧисловойКодПриИзменении(Элемент)
	Запрос=Новый Запрос("ВЫБРАТЬ
	                    |	Врачи.Ссылка,
	                    |	Врачи.Ссылка.Код КАК Код
	                    |ИЗ
	                    |	Справочник.Врачи КАК Врачи
	                    |ГДЕ
	                    |	Врачи.КодВрача = &Стркод");	
	Запрос.УстановитьПараметр("Стркод",ЧисловойКод);
	
	Рез=Запрос.Выполнить().Выгрузить();
	Если Рез.Количество()=0 Тогда
		Предупреждение("Не найден!",5);
		Возврат;
	КонецЕСли;
	
	Врач=Рез.Получить(0).Ссылка;
	КодВрача=Рез.Получить(0).Код;

КонецПроцедуры

Процедура ПриОткрытии()
	ОПУ=СписокВрачей.Отбор.Найти("ПометкаУдаления");
	ОПУ.Установить(Ложь,Истина);
	
КонецПроцедуры
