
Процедура ПоУмолчаниюПриИзменении(Элемент)
	Запрос=Новый Запрос("ВЫБРАТЬ
	                    |	ГруппировкаБрендовДляСС.Ссылка
	                    |ИЗ
	                    |	Справочник.ГруппировкаБрендовДляСС КАК ГруппировкаБрендовДляСС
	                    |ГДЕ
	                    |	ГруппировкаБрендовДляСС.ПоУмолчанию = ИСТИНА");
	
	Рез=Запрос.Выполнить();
	Если Рез.Пустой()=Истина Тогда
		Возврат; // нет вообще элементов по умолчанию
	КонецЕсли;
	
	Выб=Рез.Выбрать();
	Выб.Следующий();
	
	ЭлементПоУмолчанию=Выб.ссылка;
	
	Если ЭтотОбъект.Ссылка=ЭлементПоУмолчанию Тогда 
		Возврат; // сами себя редактируем
	КонецЕсли;
	
	Если ПоУмолчанию=Истина Тогда
		Если Вопрос("Уже назначена группа брендов аптек по умолчанию
			|"+ЭлементПоУмолчанию+"
			|Назначить группой по умолчанию текущую?", РежимДиалогаВопрос.ДаНет)=КодВозвратаДиалога.Да ТОгда
			ОбъектЭлементПоУмолчанию=ЭлементПоУмолчанию.ПолучитьОбъект();
			ОбъектЭлементПоУмолчанию.ПоУмолчанию=ЛОжь;
			ОбъектЭлементПоУмолчанию.Записать();
		Иначе
			ПоУмолчанию=ложь;
		КонецЕсли;
	КонецЕсли;
	
			
			
	
	
	
	
КонецПроцедуры 

Процедура ДляВнешнейСправкиПриИзменении(Элемент)
	Запрос=Новый Запрос("ВЫБРАТЬ
	                    |	ГруппировкаБрендовДляСС.Ссылка
	                    |ИЗ
	                    |	Справочник.ГруппировкаБрендовДляСС КАК ГруппировкаБрендовДляСС
	                    |ГДЕ
	                    |	ГруппировкаБрендовДляСС.ДляВнешнейСправки = ИСТИНА");
	
	Рез=Запрос.Выполнить();
	Если Рез.Пустой()=Истина Тогда
		Возврат; // нет вообще элементов по умолчанию
	КонецЕсли;
	
	Выб=Рез.Выбрать();
	Выб.Следующий();
	
	ЭлементДляВнешнейСправки=Выб.ссылка;
	
	Если ЭтотОбъект.Ссылка=ЭлементДляВнешнейСправки Тогда 
		Возврат; // сами себя редактируем
	КонецЕсли;
	
	Если ДляВнешнейСправки=Истина Тогда
		Если Вопрос("Уже назначена группа брендов аптек для аутсорсинговой справки
			|"+ЭлементДляВнешнейСправки+"
			|Назначить группой для аутсорсинговой справки текущую?", РежимДиалогаВопрос.ДаНет)=КодВозвратаДиалога.Да ТОгда
			ОбъектЭлементДляВнешнейСправки=ЭлементДляВнешнейСправки.ПолучитьОбъект();
			ОбъектЭлементДляВнешнейСправки.ДляВнешнейСправки=ЛОжь;
			ОбъектЭлементДляВнешнейСправки.Записать();
		Иначе
			ДляВнешнейСправки=ложь;
		КонецЕсли;
	КонецЕсли;
	

КонецПроцедуры
