Процедура УстановитьВсеРеквизитыВПостроительОтчета()
	
	ТХТ="ВЫБРАТЬ ";
	ТХТРеквизиты = " " ;
	ИмяСправочника = "МестаХранения";
	
	

	Для каждого стр из Метаданные.НайтиПоТипу(Тип("СправочникСсылка."+ИмяСправочника)).Реквизиты Цикл
		ТХТРеквизиты = ТХТРеквизиты + " " + стр.Имя + ",";
		ЕстьРеквизиты = Истина;
	КонецЦикла;
	
	
	ТХТРеквизиты = ЛЕВ(ТХТРеквизиты,СтрДлина(ТХТРеквизиты)-1);
	
	ТХТ = ТХТ + " " + ТХТРеквизиты + "  
	|ИЗ
	|	Справочник."+ИмяСправочника+" КАК МХ
	|{ГДЕ
	|	 " + ТХТРеквизиты + " }";
	
	ПостроительОтчета.Текст=ТХТ;
	
	
КонецПроцедуры

Процедура ПриОткрытии()
	УстановитьВсеРеквизитыВПостроительОтчета();
	Если ТипЗнч(Условия.Получить()) = Тип(ПостроительОтчета.ПолучитьНастройки(Ложь,Ложь,Ложь,Ложь,Ложь)) Тогда
		ПостроительОтчета.УстановитьНастройки(Условия.Получить(),Истина,Ложь,Ложь,Ложь,Ложь);
	Конецесли;
КонецПроцедуры

Процедура ЗаписатьОтборВХранилище()
	Условия = Новый ХранилищеЗначения(ПостроительОтчета.ПолучитьНастройки(Истина,Ложь,Ложь,Ложь,Ложь));
КонецПроцедуры

Процедура ТабличноеПоле1ПриОкончанииРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования)
	ЗаписатьОтборВХранилище();
КонецПроцедуры

Процедура ПередЗаписью(Отказ)
	ЗаписатьОтборВХранилище();
КонецПроцедуры

