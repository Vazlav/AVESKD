
Процедура ТоварПриИзменении(Элемент)
	// Вставить содержимое обработчика.
	ЭлементыФормы.Надпись3.Заголовок="Код 1С :"+ЕИТ.Код;

КонецПроцедуры

Процедура ПересчетНаценки()
	Если ТОвар.ЗакупочнаяЦена>0 тогда
		
		Наценка=""+Окр( (РозничнаяЦенаГТТ - ТОвар.ЗакупочнаяЦена)/ТОвар.ЗакупочнаяЦена*100,2)+" %";
	Иначе
		Наценка="Нет закуп. в АП!";
	КонецЕсли;
	
	зАКУПап=ТОвар.ЗакупочнаяЦена;
	
КонецПроцедуры

Процедура ПриОткрытии()
	ПересчетНаценки();
	
КонецПроцедуры

Процедура ВзятьКодИзАПНажатие(Элемент)
	// Вставить содержимое обработчика.
	
	Если Товар.Пустая()=Ложь Тогда
		Код=ТОвар.Код;
	Иначе
		Код=0;
	КонецЕсли;	
	
КонецПроцедуры

Процедура ТоварОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	// Вставить содержимое обработчика.
	ЕИТ=ВыбранноеЗначение.ЕдиницаОтгрузки;
	ЭлементыФормы.Надпись3.Заголовок="Код 1С :"+ЕИТ.Код;
	
	ПересчетНаценки();
КонецПроцедуры

Процедура ЕИТОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	// Вставить содержимое обработчика.
	ЭлементыФормы.Надпись3.Заголовок="Код 1С :"+ЕИТ.Код;
КонецПроцедуры

Процедура ПередЗакрытием(Отказ, СтандартнаяОбработка)
	если еит.Пустая() тогда
		Предупреждение(" Не указана единица измерения!");
		Отказ=истина;
	КонецЕсли;
	
		
КонецПроцедуры

Процедура РозничнаяЦенаГТТПриИзменении(Элемент)
	ПересчетНаценки();
КонецПроцедуры

Процедура НеИспользоватьПриИзменении(Элемент)
	ПРедупреждение("ВНИМАНИЕ! ИЗМЕНЕНО СОСТОЯНИЕ ИСПОЛЬЗОВАНИЯ В АССОРТИМЕНТНОМ ПЛАНИРОВАНИИ ЗАПИСИ АПГТТ!!!");
КонецПроцедуры

Процедура КоманднаяПанель1Разместить_по_аптекам_ГТТ(Кнопка)
	Если ЭтотОбъект .ЭтоНовый()=Истина ТОгда
		//------------------<В серверном модуле предупреждение не работает и дает ошибку>-------------------GtG----26.11.2007 
		Сообщить("Элемент АП ГТТ еще не записан!
		| Невозможно ривязать  матрице незаписанный элемент АП ГТТ.",СтатусСообщения.ОченьВажное);
		Возврат;
	КонецЕсли;
	ОМ16_ДобавитьТоварВоВсеАптекиГТТ( ЭтотОбъект.Ссылка ); // среверный, ТЗ на форме не прочуихвает изменений
	ЭлементыФормы.Матрица.ОбновитьСтроки();
КонецПроцедуры

Процедура ПередЗаписью(Отказ)
	
	Если Еит.Пустая() ТОгда
		Предупреждение("Не указана единица измерения!");
		Отказ=Истина;
	КонецЕсли; 
	
	Если РозничнаяЦенаГТТ/ЕИТ.К<>Окр(РозничнаяЦенаГТТ/ЕИТ.К,2) ТОгда
		Предупреждение("Цена должна делиться на коэффициент единицы измерения ровно, без тысячных долей копеек!");
		
		РозничнаяЦенаГТТ=Окр(РозничнаяЦенаГТТ/ЕИТ.К,2)*ЕИТ.К;
	КонецЕсли; 	
	
	
	
	
КонецПроцедуры
ЭлементыФормы.Надпись3.Заголовок="Код 1С :"+ЕИТ.Код;


