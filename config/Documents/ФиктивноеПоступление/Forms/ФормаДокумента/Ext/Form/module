
Процедура ТоварТоварПриИзменении(Элемент)
	
	ТекСтрока = ЭлементыФормы.Товар.ТекущаяСтрока;
	ТекСтрока.КодТовара = Элемент.Значение.Код;
	
КонецПроцедуры

Процедура КоманднаяПанель1ПодобратьТовар(Кнопка)
	
	Если Товар.Количество() > 0 Тогда
		Режим = РежимДиалогаВопрос.ДаНет;
		Ответ = Вопрос("Существующие строки будут удалены. Продолжить?", Режим, 0);
		Если Ответ = КодВозвратаДиалога.Нет Тогда
			Возврат;			
		КонецЕсли;
		
		Товар.Очистить();
		
	КонецЕсли;
	
	Обработка = Обработки.ПодборТоваровВТабличнуюЧасть.Создать();
	ФормаОбработки = Обработка.ПолучитьФорму("Форма", , Новый УникальныйИдентификатор);
	МассивПодобранныхТоваров = ФормаОбработки.ОткрытьМодально();
	
	Если МассивПодобранныхТоваров = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	Для Каждого ТекТовар Из МассивПодобранныхТоваров Цикл		
		НовСтрока = Товар.Добавить();
		НовСтрока.Товар = ТекТовар;
		НовСтрока.КодТовара = ТекТовар.Код;
		
	КонецЦикла;
	
КонецПроцедуры