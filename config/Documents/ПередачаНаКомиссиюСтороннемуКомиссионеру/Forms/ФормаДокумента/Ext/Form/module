
Процедура СкладНачалоВыбора(Элемент, СтандартнаяОбработка)
	СтандартнаяОбработка=ЛОжь;

	Если Фирма.Пустая()=Истина Тогда
		Предупреждение("Не выбрана фирма!");
		Возврат;
	Конецесли;
		
	
		
	ФВыбора=Справочники.МестаХранения.ПолучитьФормуВыбора("ФормаСписка",ЭтаФорма,1);
	ОтборСклада=ФВыбора.Отбор;
	
	ОтборСклада.Фирма.Установить(Фирма,Истина);
	ОтборСклада.ТипСклада.Установить(Перечисления.ТипыМХ.Опт,Истина);
	
	ФВыбора.Открыть();
	
КонецПроцедуры


Процедура ОбработкаВыбора(ЗначениеВыбора, Источник)
	Если ТипЗнч(ЗначениеВыбора)=Тип("СправочникСсылка.МестаХранения") Тогда
		Склад=ЗначениеВыбора;
	КонецЕсли; 	
	
	Если ТипЗнч(ЗначениеВыбора)=Тип("СправочникСсылка.ДоговорыПоставки") Тогда
		Если ЗначениеВыбора.Фирма = Фирма Тогда
			ДоговорКомиссии=ЗначениеВыбора;
		Иначе
			Предупреждение("Попытка выбрать договор с другой фирмой! 
			|Нельзя! 
			|Фирма договора должна соответствовать фирме документа!");
		Конецесли;
		
	КонецЕсли; 	

	
КонецПроцедуры

Процедура ДоговорКомиссииНачалоВыбора(Элемент, СтандартнаяОбработка)
	СтандартнаяОбработка=Ложь;
	Если Комиссионер.Пустая() Тогда
		
		Предупреждение("Не выбран комиссионер!");
		Возврат;
	КонецЕсли;
	
	ФД=Справочники.ДоговорыПоставки.ПолучитьФормуВыбора("ФормаСписка");

	ФД.Отбор.Владелец.Установить(Комиссионер,Истина);
	ФД.Отбор.Фирма.Установить(Фирма,Истина);
	
	ФД.Открыть();
	
	
КонецПроцедуры

Процедура ДокОснованиеНажатие(Элемент)
	
	ДокОснование.ПолучитьФорму("ФормаДокумента").Открыть();
	
КонецПроцедуры

Процедура КоманднаяПанель1Расценить(Кнопка)
	ОМ6_КоманднаяПанельКнопкаРасценить(ЭтаФорма,ЭтотОбъект,Товар);
КонецПроцедуры

Процедура ТоварЦенаРознПриИзменении(Элемент)
	ЭлементыФормы.Товар.ТекущаяСтрока.СуммаРозн=ЭлементыФормы.Товар.ТекущаяСтрока.ЦенаРозн*ЭлементыФормы.Товар.ТекущаяСтрока.КоличествоФакт;   
	ЭлементыФормы.Товар.ТекущаяСтрока.ПроцентРознНац =(ЭлементыФормы.Товар.ТекущаяСтрока.СуммаРозн/ЭлементыФормы.Товар.ТекущаяСтрока.СуммаЗакуп-1)*100;
	
	СуммаПередачи=Товар.Итог("СуммаРозн");
КонецПроцедуры

Процедура ТоварСуммаРознПриИзменении(Элемент)
	ЭлементыФормы.Товар.ТекущаяСтрока.ЦенаРозн	=Окр( ЭлементыФормы.Товар.ТекущаяСтрока.СуммаРозн/ЭлементыФормы.Товар.ТекущаяСтрока.КоличествоФакт,2);
	ЭлементыФормы.Товар.ТекущаяСтрока.ПроцентРознНац =(ЭлементыФормы.Товар.ТекущаяСтрока.СуммаРозн/ЭлементыФормы.Товар.ТекущаяСтрока.СуммаЗакуп-1)*100;
	
	СуммаПередачи=Товар.Итог("СуммаРозн");
КонецПроцедуры


Процедура ПечатьНажатие(Элемент)
	ОМ10_КнопкаПечатьНажатие (ЭтотОбъект,ЭтаФорма);
КонецПроцедуры

Процедура ПриОткрытии()
	СуммаЗакупочная=Товар.Итог("СуммаЗакуп");
	СуммаПередачи=Товар.Итог("СуммаРозн");

	ОМ10_ЗаполнитьСписокПечФорм(ЭтотОбъект,СписокПечатныхФорм);
КонецПроцедуры


