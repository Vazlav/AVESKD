
Процедура ДействияФормыВыгрузитьВАптеку(Кнопка)
	
	Док = ЭлементыФормы.ДокументСписок.ТекущаяСтрока;
	Если Док.Проведен = Истина Тогда
		
		ДокОбъект = Док.ПолучитьОбъект();
		Если ДокОбъект.ВыгрузитьВАптеку() = Истина Тогда
			Предупреждение("Документ выгружен!");
		Иначе
			Предупреждение("Документ НЕ выгружен!");
		КонецЕсли;
	Иначе
		Предупреждение("Можно выгружать только проведенный документ!");
	КонецЕсли;	
	
КонецПроцедуры


Процедура СкладПриИзменении(Элемент)
	
	ЕстьОтборПоСкладу=ЗначениеЗаполнено(Элемент.Значение);
	Если ТипЗнч(ЭлементыФормы.Склад.Значение)=Тип("СписокЗначений") ТОгда
		Отбор.Склад.ВидСравнения=ВидСравнения.ВСписке;
	Иначе
		Отбор.Склад.ВидСравнения=ВидСравнения.Равно;
	КонецЕсли; 
	
	Отбор.Склад.Использование=ЕстьОтборПоСкладу;
	
	
КонецПроцедуры

Процедура ФирмаПриИзменении(Элемент)
	
	
	ЕстьОтборПоФирме=ЗначениеЗаполнено(Элемент.Значение);
	Если ТипЗнч(Элемент.Значение)=Тип("СписокЗначений") ТОгда
		Отбор.Фирма.ВидСравнения=ВидСравнения.ВСписке;
	Иначе
		Отбор.Фирма.ВидСравнения=ВидСравнения.Равно;
	КонецЕсли; 
	
	Отбор.Фирма.Использование=ЕстьОтборПоФирме;
	
	
КонецПроцедуры


Процедура СброситьФильтрыНажатие(Элемент)
	
	Отбор.Фирма.Использование=Ложь;
	Отбор.Склад.Использование=Ложь;
	ЭлементыФормы.Фирма.Значение 	 = Справочники.Фирмы.ПустаяСсылка();
	ЭлементыФормы.Склад.Значение 	 = Справочники.МестаХранения.ПустаяСсылка();
	
КонецПроцедуры

Процедура КоманднаяПанель1ДобавитьВСписок(Кнопка)
	
	Построитель.Выполнить();
	СА=Построитель.Результат.Выгрузить().ВыгрузитьКолонку("ссылка");
	СписокАптек.Очистить();
	СписокАптек.ЗагрузитьЗначения(СА);
	СписокАптек.ЗаполнитьПометки(Истина);
	
	
КонецПроцедуры

Процедура КоманднаяПанель2УстановитьФильтрПоВыбраннымАптекам(Кнопка)
	
	ОС=Отбор.Найти("Склад");
	ОС.ВидСравнения=ВидСравнения.ВСписке;
	ОС.Значение=СписокАптек;
	ОС.Использование=Истина;
КонецПроцедуры

Отбор.Дата.Значение = НачалоМесяца(ТекущаяДата()-24*60*60*35);
Отбор.Дата.ВидСравнения = ВидСравнения.БольшеИлиРавно;
Отбор.Дата.Использование = Истина;

Построитель.Текст="ВЫБРАТЬ
                  |	МестаХранения.Ссылка
                  |ИЗ
                  |	Справочник.МестаХранения КАК МестаХранения
                  |{ГДЕ
                  |	МестаХранения.Ссылка.* КАК Аптека}"; 