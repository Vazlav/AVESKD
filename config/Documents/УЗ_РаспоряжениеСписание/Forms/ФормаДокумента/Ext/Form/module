
Процедура ОбновлениеДоступностиФормы()
	
	Если НЕ ЗначениеЗаполнено(СтатусСписания) или (СтатусДокАптеки = Перечисления.СтатусДокАптеки.КОбработкеОфисом и НЕ Проведен ) Тогда
		ЭтаФорма.ТолькоПросмотр = Ложь;
	Иначе
		ЭтаФорма.ТолькоПросмотр = Истина;
	КонецЕсли;
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОсновныеДействияФормыСохранить(Кнопка)
	
	Если Проведен = Истина Тогда
		Предупреждение("Документ НЕ сохранен. В проведенном документе пользуйтесь кнопкой <Провести>!");
		Возврат;
	КонецЕсли;
	
	
	Режим = РежимДиалогаВопрос.ДаНет;
	Ответ = Вопрос("Вы действительно хотите сохранить документ/изменения?",Режим,0);
	
	Если Ответ = КодВозвратаДиалога.Да Тогда
		Записать(РежимЗаписиДокумента.Запись);
	КонецЕсли;
	
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	ОбновлениеДоступностиФормы();
	ОМ10_ЗаполнитьСписокПечФорм(ЭтотОбъект,СписокПечатныхФорм);
	
КонецПроцедуры

Процедура ОсновныеДействияФормыкнВыгрузить(Кнопка)
	
	Если ВыгрузитьВАптеку() = Истина Тогда
		Выгружен = Истина;
		Записать(РежимЗаписиДокумента.Запись);
	КонецЕсли;
	
КонецПроцедуры

Процедура ПоказатьИсторию()
	
	ИсторияИзменений.Очистить();
	
	ТЗИстории = ОбщегоНазначения.ПолучитьИсториюИзмененийДокумента(Ссылка);
	Если НЕ ТЗИстории = Неопределено Тогда
		ЭлементыФормы.ИсторияИзменений.Значение = ТЗИстории;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПанельШапкиПриСменеСтраницы(Элемент, ТекущаяСтраница)
	
	Если Элемент.ТекущаяСтраница = Элемент.Страницы.ИсторияОфиса Тогда
		ПоказатьИсторию();
	КонецЕсли;
	
КонецПроцедуры

Процедура КоманднаяПанель2кнПечать(Кнопка)
	ОМ10_КнопкаПечатьНажатие(ЭтотОбъект,ЭтаФорма);	
КонецПроцедуры
