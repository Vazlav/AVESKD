Перем КонтрольнаяСуммаШапкиИсходногоДокументаПередОткрытием ;
Перем КонтрольнаяСуммаТЧИсходногоДокументаПередОткрытием;


Процедура ПриОткрытии()
	Если ЭтоНовый()=Истина Тогда
		Фирма=Константы.ОсновнаяФирма.Получить();
		Валюта=Константы.ОсновнаяВалютаУчета.Получить();
	КонецЕсли;
	ОМ4_ПРиОткрытии(ЭтотОбъект,Товар,КонтрольнаяСуммаШапкиИсходногоДокументаПередОткрытием,КонтрольнаяСуммаТЧИсходногоДокументаПередОткрытием);
КонецПроцедуры

Процедура РассчитатьНовыеЗАкупЦеныАПНажатие(Элемент)
	// Старые +/- %
	
	Для Каждого СтрТЧ из ТОвар Цикл
		СтрТЧ.НоваяЗакупЦенаАП=СтрТЧ.СтараяЗакупЦенаАП+СтрТЧ.СтараяЗакупЦенаАП/100*СтарыеПлюсПроцент;
	КонецЦикла;	
	
КонецПроцедуры

Процедура Кнопка1Нажатие(Элемент)
	// По документу прихода
	Для Каждого СтрТЧ из ТОвар Цикл
		СтрТЧ.НоваяЗакупЦенаАП=СтрТЧ.ЗакупЦенаПоДок;
	КонецЦикла;	
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	// Вставить содержимое обработчика.
	ОМ4_ПередЗаписью(ЭтотОбъект,Товар,КонтрольнаяСуммаШапкиИсходногоДокументаПередОткрытием ,КонтрольнаяСуммаТЧИсходногоДокументаПередОткрытием);
КонецПроцедуры

