

Процедура ОсновныеДействияФормыкнПеренестиВДокумент(Кнопка)
	
	ОповеститьОВыборе(ТЗТовара);	
	
КонецПроцедуры

Процедура СправочникТовараВыбор(Элемент, ВыбраннаяСтрока, Колонка, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;	
	
	СтрТовар = ВыбраннаяСтрока;
	
	Отбор = Новый Структура;
	Отбор.Вставить("Товар", СтрТовар);
	НайденнаяСтрока = ТЗТовара.Найти(СтрТовар, "Товар");
	
	Если НайденнаяСтрока = Неопределено Тогда
		НоваяСтрока = ТЗТовара.Добавить();
		НоваяСтрока.КодТовара			= СтрТовар.Код;
		НоваяСтрока.Товар				= СтрТовар;
		НоваяСтрока.СуммаОбщегоБюджета	= 0;
		НоваяСтрока.СуммаБонуса			= 0;
		
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	ТЗТовара = ВладелецФормы.Товар.Выгрузить();
	
	ОтборПоПроизводителю=СправочникТовара.Отбор.Найти("Производитель");	
	Если НЕ ОтборПоПроизводителю = Неопределено и НЕ ВладелецФормы.Производитель.Пустая() Тогда
		ОтборПоПроизводителю.ВидСравнения=ВидСравнения.Равно;
		ОтборПоПроизводителю.Значение=ВладелецФормы.Производитель;
		ОтборПоПроизводителю.Использование=Истина;
	 КонецЕсли;

КонецПроцедуры
